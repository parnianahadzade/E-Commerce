import{r as l,A as c,j as e}from"./index-BU1sSiHD.js";import{M as N}from"./MobileFooter-DM77G62Y.js";import{N as b}from"./NavBar-D3mmQ8B2.js";import{f as u}from"./productApi-DT0FMv-x.js";import{B as v}from"./Input-CMTCj2X8.js";const w=({productInCart:n})=>{var x,r;const[s,a]=l.useState(),[i,o]=l.useState(),{shoppingCart:m,findProductInCart:C,addToCart:B,sumProductInCart:h,subtractProductInCart:j,isProductInCartValid:p,deleteProductFromCart:f}=l.useContext(c);return l.useEffect(()=>{u(n.productInCart.productId,a)},[]),l.useEffect(()=>{var d;const t=s==null?void 0:s.inventories.find(g=>g.id===n.productInCart.inventoryId);console.log(t),p(t==null?void 0:t.quantity,(d=n==null?void 0:n.productInCart)==null?void 0:d.quantity)?o(t):f(m,n.productInCartIndex)},[s]),e.jsx("div",{className:" border-b px-1 py-5",children:e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{className:"w-[114px] h-[114px] mb-3",src:(x=s==null?void 0:s.mainImage)==null?void 0:x.filePath}),e.jsx("img",{className:"w-[60px] ",src:s.mainImage.filePath}),e.jsxs("div",{className:"border rounded-md flex justify-between grow px-2 py-1 mt-4 gap-x-3 text-red-500 items-center cursor-pointer select-none ",children:[e.jsx("span",{onClick:()=>{h(n,i.quantity)},children:"+"}),e.jsx("span",{children:(r=n==null?void 0:n.productInCart)==null?void 0:r.quantity}),e.jsx("span",{onClick:()=>{j(n)},children:"-"})]})]}),e.jsxs("div",{className:"flex flex-col mr-3",children:[e.jsx("span",{className:" font-semibold mb-2",children:s==null?void 0:s.name}),e.jsxs("div",{className:"flex flex-col text-sm font-medium text-neutral-500",children:[e.jsx("span",{children:"گارانتی اصالت و سلامت فیزیکی کالا"}),e.jsxs("span",{children:["سایز ",i==null?void 0:i.size]}),e.jsx("span",{children:"ارسال دیجی‌کالا از ۲ روز کاری دیگر"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"gap-x-1 flex  text-xs text-rose-600 mt-3 font-medium",children:[e.jsx("span",{children:s==null?void 0:s.price}),e.jsx("span",{children:"تومان"}),e.jsx("span",{children:"تخفیف"})]}),e.jsxs("div",{className:" flex text-lg gap-x-1  mt-3 font-semibold",children:[e.jsx("span",{children:"۳۰,۰۰۰"}),e.jsx("span",{children:"تومان"})]})]})]})]})})},y=()=>e.jsxs("div",{className:"lg:w-[300px] w-screen left-0 bg-white  justify-between items-center lg:items-stretch fixed bottom-[86px] flex lg:flex-col gap-y-4 border p-5 lg:sticky lg:top-[155px]",children:[e.jsxs("div",{className:"lg:flex   hidden justify-between text-neutral-500 font-semibold  ",children:[e.jsx("span",{children:"قیمت کالا ها (۲)"}),e.jsxs("div",{children:[e.jsx("span",{className:"ml-1",children:"۲,۷۶۰,۰۰۰"}),e.jsx("span",{children:"تومان"})]})]}),e.jsxs("div",{className:"flex lg:flex-row flex-col justify-between items-center  font-semibold lg:order-none order-2  ",children:[e.jsx("span",{children:"جمع سبد خرید"}),e.jsxs("div",{children:[e.jsx("span",{className:"ml-1",children:"۲,۷۶۰,۰۰۰"}),e.jsx("span",{children:"تومان"})]})]}),e.jsxs("div",{className:"lg:flex hidden justify-between text-rose-600 font-semibold   ",children:[e.jsx("span",{children:"سود شما از خرید"}),e.jsxs("div",{children:[e.jsx("span",{className:"ml-1",children:"۲,۷۶۰,۰۰۰"}),e.jsx("span",{children:"تومان"})]})]}),e.jsx(v,{size:"lg",shape:"rounded-xl",bgColor:"bg-rose-500",txtColor:"text-white",children:"تایید و تکمیل سفارش"})]}),I=()=>{const{shoppingCart:n}=l.useContext(c);return e.jsxs("div",{className:"cart-page",children:[e.jsx(b,{}),e.jsx(N,{}),e.jsx("div",{className:"mx-auto max-w-screen-xl",children:e.jsxs("div",{className:"flex mt-10",children:[e.jsxs("div",{className:"grow flex flex-col border rounded-md ml-3 px-7 py-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:" font-semibold text-lg",children:"سبد خرید شما"}),e.jsx("div",{children:"three dot"})]}),e.jsxs("span",{className:" text-neutral-500 text-sm",children:[n.length," کالا"]})]}),n.map((s,a)=>e.jsx(w,{productInCart:{productInCart:s,productInCartIndex:a}}))]}),e.jsx("div",{children:e.jsx(y,{})})]})})]})};export{I as default};
